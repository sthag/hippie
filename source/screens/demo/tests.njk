<!-- tests.page -->
{% set pageId = "tests" %}
{% set pageClass = "h_full_view" %}

{% extends "demo/_default.njk" %}
{% import "demo/macros/_nav.njk" as nav %}

{% block title %}Tests{% endblock %}
{% block head %}
{{ super() }}
<style>
#error {
  border: 1px solid #FFFF66;
  background-color: #FFFFCC;
  display: inline-block;
  margin-left: 10px;
  padding: 3px;
  display: none;
}
</style>
{% endblock %}

{% block body %}

<input type="password" name="txtPassword" onkeypress="capLock(event)" />
<div id="divMayus" style="visibility:hidden">Caps Lock is on.</div>
<form action="">
  <input id="txtName" type="text" /><span id="error">Caps Lock is ON.</span>
</form>

<p>Navigation</p>
{{ nav.main(data.demoadditionallinks, 'Tests') }}
{% endblock %}

{% block script %}
{{ super() }}
<script src="../js/{{hippie.jsFile}}.min.js" type="text/javascript"></script>
<script type="text/javascript">
// Page specific
// ------------------------------------------------------------------------------
$( document ).ready(function() {
  console.log('HIPPIE Tests');

});
function capLock(e){
  kc = e.keyCode?e.keyCode:e.which;
  sk = e.shiftKey?e.shiftKey:((kc == 16)?true:false);
  if(((kc >= 65 && kc <= 90) && !sk)||((kc >= 97 && kc <= 122) && sk))
  document.getElementById('divMayus').style.visibility = 'visible';
  else
  document.getElementById('divMayus').style.visibility = 'hidden';
}

function capsDetect() {
  var body = document.getElementsByTagName('body')[0];
  var isShiftPressed = false;
  var isCapsOn = false;
  var capsWarning = document.getElementById('error');
  body.addEventListener('keydown', function(e) {
  var keyCode = e.keyCode ? e.keyCode : e.which;
  if (keyCode === 16) {
  isShiftPressed = true;
  }
  });
  body.addEventListener('keyup', function(e) {
  var keyCode = e.keyCode ? e.keyCode : e.which;
  if (keyCode === 16) {
  isShiftPressed = false;
  }
  if (keyCode === 20) {
  if (isCapsOn) {
  isCapsOn = false;
  capsWarning.style.display = 'none';
  } else {
  isCapsOn = true;
  capsWarning.style.display = 'inline-block';
  }
  }
  });
  body.addEventListener('keypress', function(e) {
  var keyCode = e.keyCode ? e.keyCode : e.which;
  if (keyCode <= 40)
  return;
  if (keyCode >= 65 && keyCode <= 90 && !isShiftPressed) {
  isCapsOn = true;
  capsWarning.style.display = 'inline-block';
  } else {
  capsWarning.style.display = 'none';
  }
  });
}
capsDetect();
</script>
{% endblock %}
