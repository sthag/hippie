var w=Math.max(document.documentElement.clientWidth,window.innerWidth||0),h=Math.max(document.documentElement.clientHeight,window.innerHeight||0),full_view_hover=!0,doc_pos_y=0,basic_ease=600,scroll_y_margin=h;
function setup(){$("#js_tph").length&&full_view_hover&&$("#js_tph").addClass("hover_full_view_change")}function Utils(){}function scrollNav(){$(".nav a").click(function(){$(".active").removeClass("active"),$(this).closest("li").addClass("active");var t=$(this).attr("class");return $("."+t).parent("li").addClass("active"),$("html, body").stop().animate({scrollTop:$($(this).attr("href")).offset().top-160},400),!1}),$(".scrollTop a").scrollTop()}Utils.prototype={constructor:Utils,isElementInView:function(t,s){var l=$(window).scrollTop(),o=l+$(window).height(),i=$(t).offset().top,e=i+$(t).height();return!0===s?l<i&&o>e:i<=o&&e>=l}};var Utils=new Utils;
$(document).ready(function(){setup();var e=!1;$(".js_pop").hover(function(){$(this);$(this).attr("emmet"),$(this).next(".exp_pop").show()},function(){$(this).next(".exp_pop").hide()}).mousemove(function(e){$(this).next(".exp_pop").css({top:e.pageY-$(this).next(".exp_pop").outerHeight()-4,left:e.pageX+8})}),$(".exp_help_btn").click(function(t){var s,o;1!=e?(e=!0,$(".js_pop").each(function(e,t){"static"==$(this).css("position")&&($(this).addClass("js_changed_pos"),$(this).css("position","relative")),o=$(this).next(".exp_pop").detach(),(s=$(this).wrap('<span class="exp_wrap"></span>').parent().prepend('<span class="exp_marker_pop"></span>')).after(o)})):($(".js_pop").each(function(e,t){s=$(this).parent(".exp_wrap"),o=s.next(".exp_pop").detach(),s.find(".exp_marker_pop").remove(),$(this).unwrap(".exp_wrap"),$(this).after(o),$(this).hasClass("js_changed_pos")&&($(this).css("position",""),""==$(this).attr("style")&&$(this).removeAttr("style"),$(this).removeClass("js_changed_pos"))}),e=!1),console.log("Explanation mode: "+e)}),$("#js_scrolltop").click(function(e){console.log("scroll to the top"),e.preventDefault(),$("body").animate({scrollTop:0},basic_ease,function(){console.log("arrived at top")})}),$("#js_scrolldown").click(function(e){console.log("scroll down"),e.preventDefault(),$("body").animate({scrollTop:$(document).height()},2*basic_ease,function(){console.log("arrived at bottom")})}),$("#gameIcon").click(function(e){e.preventDefault(),$(this).clone().appendTo("#gameDetail"),$(this).siblings().clone().appendTo("#gameDetail"),$("#gameDetail").removeClass("magic")});var t=0;$(".pass-def dd").each(function(){$(this).find("li").each(function(e){if(0==$(this).children("ul").length){var s=$(this).html();$(this).html(s+'<span class="list-count">'+t+"</span>"),t++}})})}),$(document).scroll(function(){doc_pos_y=$(document).scrollTop();var e=scroll_y_margin;doc_pos_y>e?$("#js_scrolltop").parent().removeClass("magic"):$("#js_scrolltop").parent().addClass("magic")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhcmlhYmxlcy5qcyIsImZ1bmN0aW9ucy5qcyIsImdsb2JhbC5qcyJdLCJuYW1lcyI6WyJ3IiwiTWF0aCIsIm1heCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaCIsImNsaWVudEhlaWdodCIsImlubmVySGVpZ2h0IiwiZnVsbF92aWV3X2hvdmVyIiwiZG9jX3Bvc195IiwiYmFzaWNfZWFzZSIsInNjcm9sbF95X21hcmdpbiIsInNldHVwIiwiJCIsImxlbmd0aCIsImFkZENsYXNzIiwiVXRpbHMiLCJzY3JvbGxOYXYiLCJjbGljayIsInJlbW92ZUNsYXNzIiwidGhpcyIsImNsb3Nlc3QiLCJ0aGVDbGFzcyIsImF0dHIiLCJwYXJlbnQiLCJzdG9wIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsIm9mZnNldCIsInRvcCIsInByb3RvdHlwZSIsImNvbnN0cnVjdG9yIiwiaXNFbGVtZW50SW5WaWV3IiwiZWxlbWVudCIsImZ1bGx5SW5WaWV3IiwicGFnZVRvcCIsInBhZ2VCb3R0b20iLCJoZWlnaHQiLCJlbGVtZW50VG9wIiwiZWxlbWVudEJvdHRvbSIsInJlYWR5IiwiZXhwX21vZGUiLCJob3ZlciIsIm5leHQiLCJzaG93IiwiaGlkZSIsIm1vdXNlbW92ZSIsImV2IiwiY3NzIiwicGFnZVkiLCJvdXRlckhlaWdodCIsImxlZnQiLCJwYWdlWCIsImUiLCIkd3JhcCIsIiRwb3AiLCJlYWNoIiwiaSIsImRldGFjaCIsIndyYXAiLCJwcmVwZW5kIiwiYWZ0ZXIiLCJmaW5kIiwicmVtb3ZlIiwidW53cmFwIiwiaGFzQ2xhc3MiLCJyZW1vdmVBdHRyIiwiY29uc29sZSIsImxvZyIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJjbG9uZSIsImFwcGVuZFRvIiwic2libGluZ3MiLCJpbmRleCIsImNoaWxkcmVuIiwidGVtcENvbnRlbnQiLCJodG1sIiwic2Nyb2xsIl0sIm1hcHBpbmdzIjoiQUFB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QVFDLElBQUkscUJBQ1pDLEVBQU1DLGlCQUVOekQsRUFBRSxRQUFRYSxTQUFTQyxVQUFXLEdBQUlqQixXQUFZLFdBQzVDeUQsUUFBUUMsSUFBSSxzQkFHZnZELEVBQUUsa0JBQWtCSyxNQUFNLFNBQVNtRCxHQUNsQ0YsUUFBUUMsSUFBSSxlQUNaQyxFQUFNQyxpQkFDTnpELEVBQUUsUUFBUWEsU0FBU0MsVUFBV2QsRUFBRWIsVUFBVXFDLFVBQXdCLEVBQWIzQixXQUFnQixXQUNuRXlELFFBQVFDLElBQUkseUJBTWZ2RCxFQUFHLGFBQWNLLE1BQU0sU0FBU21ELEdBQy9CQSxFQUFNQyxpQkFDTnpELEVBQUdPLE1BQU9tRCxRQUFRQyxTQUFVLGVBQzVCM0QsRUFBR08sTUFBT3FELFdBQVdGLFFBQVFDLFNBQVUsZUFDdkMzRCxFQUFHLGVBQWdCTSxZQUFhLFdBR2pDLElBQUlzQyxFQUFJLEVBQ1I1QyxFQUFHLGdCQUFpQjJDLEtBQUssV0FDeEIzQyxFQUFHTyxNQUFPMEMsS0FBTSxNQUFPTixLQUFLLFNBQVVrQixHQUNyQyxHQUFLLEdBQUs3RCxFQUFHTyxNQUFPdUQsU0FBVSxNQUFPN0QsT0FBUyxDQUU3QyxJQUFJOEQsRUFBYy9ELEVBQUdPLE1BQU95RCxPQUU1QmhFLEVBQUdPLE1BQU95RCxLQUFNRCxFQUFhLDRCQUErQm5CLEVBQUcsV0FDL0RBLFdBYUo1QyxFQUFHYixVQUFXOEUsT0FBTyxXQUdwQnJFLFVBQVlJLEVBQUdiLFVBQVcyQixZQUUxQixJQUFJdEIsRUFBSU0sZ0JBRUpGLFVBQVlKLEVBQ2ZRLEVBQUUsaUJBQWlCVyxTQUFTTCxZQUFZLFNBRXhDTixFQUFFLGlCQUFpQlcsU0FBU1QsU0FBUyIsImZpbGUiOiJhbGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHcgPSBNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsIHdpbmRvdy5pbm5lcldpZHRoIHx8IDApO1xudmFyIGggPSBNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgMCk7XG5cbnZhciBmdWxsX3ZpZXdfaG92ZXIgPSB0cnVlO1xuXG52YXIgZG9jX3Bvc195ID0gMDtcbnZhciBiYXNpY19lYXNlID0gNjAwO1xudmFyIHNjcm9sbF95X21hcmdpbiA9IGg7XG5cblxuLy8gVEVTVFxuLy8gdmFyIGZpeGVkX2NvbnRhaW5lcnMgPSBbXTtcbiIsImZ1bmN0aW9uIHNldHVwKCkge1xuXHRpZigkKCcjanNfdHBoJykubGVuZ3RoICYmIGZ1bGxfdmlld19ob3Zlcikge1xuXHRcdC8vICQoJ2JvZHknKS5wcmVwZW5kKFwiPGRpdiBpZD1cXFwianNfdHBoXFxcIiBjbGFzcz1cXFwibGF5ZXJfX2hvdmVyIGhvdmVyX2Z1bGxfdmlld19jaGFuZ2VcXFwiPjwvZGl2PlwiKTtcblx0XHQkKCcjanNfdHBoJykuYWRkQ2xhc3MoXCJob3Zlcl9mdWxsX3ZpZXdfY2hhbmdlXCIpO1xuXHR9XG59XG5cbi8vIGdldCBkb2N1bWVudCBjb29yZGluYXRlcyBvZiB0aGUgZWxlbWVudFxuLy8gZnVuY3Rpb24gZ2V0Q29vcmRzKGVsZW0pIHtcbi8vICAgbGV0IGJveCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4vL1xuLy8gICByZXR1cm4ge1xuLy8gICAgIHRvcDogYm94LnRvcCArIHBhZ2VZT2Zmc2V0LFxuLy8gICAgIGxlZnQ6IGJveC5sZWZ0ICsgcGFnZVhPZmZzZXRcbi8vICAgfTtcbi8vIH1cblxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ4ODA3My8xNDQ0MTQ5XG5mdW5jdGlvbiBVdGlscygpIHtcblxufVxuXG5VdGlscy5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IFV0aWxzLFxuICAgIGlzRWxlbWVudEluVmlldzogZnVuY3Rpb24gKGVsZW1lbnQsIGZ1bGx5SW5WaWV3KSB7XG4gICAgICAgIHZhciBwYWdlVG9wID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuICAgICAgICB2YXIgcGFnZUJvdHRvbSA9IHBhZ2VUb3AgKyAkKHdpbmRvdykuaGVpZ2h0KCk7XG4gICAgICAgIHZhciBlbGVtZW50VG9wID0gJChlbGVtZW50KS5vZmZzZXQoKS50b3A7XG4gICAgICAgIHZhciBlbGVtZW50Qm90dG9tID0gZWxlbWVudFRvcCArICQoZWxlbWVudCkuaGVpZ2h0KCk7XG5cbiAgICAgICAgaWYgKGZ1bGx5SW5WaWV3ID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gKChwYWdlVG9wIDwgZWxlbWVudFRvcCkgJiYgKHBhZ2VCb3R0b20gPiBlbGVtZW50Qm90dG9tKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKChlbGVtZW50VG9wIDw9IHBhZ2VCb3R0b20pICYmIChlbGVtZW50Qm90dG9tID49IHBhZ2VUb3ApKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbnZhciBVdGlscyA9IG5ldyBVdGlscygpO1xuXG4vLyBURVNUXG5cbmZ1bmN0aW9uIHNjcm9sbE5hdigpIHtcblx0JCgnLm5hdiBhJykuY2xpY2soZnVuY3Rpb24oKXtcblx0XHQvL1RvZ2dsZSBDbGFzc1xuXHRcdCQoXCIuYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuXHRcdCQodGhpcykuY2xvc2VzdCgnbGknKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcblx0XHR2YXIgdGhlQ2xhc3MgPSAkKHRoaXMpLmF0dHIoXCJjbGFzc1wiKTtcblx0XHQkKCcuJyt0aGVDbGFzcykucGFyZW50KCdsaScpLmFkZENsYXNzKCdhY3RpdmUnKTtcblx0XHQvL0FuaW1hdGVcblx0XHQkKCdodG1sLCBib2R5Jykuc3RvcCgpLmFuaW1hdGUoe1xuXHRcdFx0XHRzY3JvbGxUb3A6ICQoICQodGhpcykuYXR0cignaHJlZicpICkub2Zmc2V0KCkudG9wIC0gMTYwXG5cdFx0fSwgNDAwKTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pO1xuXHQkKCcuc2Nyb2xsVG9wIGEnKS5zY3JvbGxUb3AoKTtcbn1cbiIsIi8vIERPTSByZWFkeVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4kKCBkb2N1bWVudCApLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG5cdC8vIFNldHVwXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdHNldHVwKCk7XG5cblxuXG5cdC8vIE1vZHVsZXNcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0Ly8gRXhwbGFuYXRpb24gbW9kdWxlIHNjcmlwdHNcblx0dmFyIGV4cF9tb2RlID0gZmFsc2U7XG5cblx0Ly8gRGlzcGxheXMgZXhwbGFuYXRpb24gcG9wdXBcblx0JChcIi5qc19wb3BcIikuaG92ZXIoXG5cdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXG5cdFx0XHRpZigkKHRoaXMpLmF0dHIoXCJlbW1ldFwiKSl7XG5cblx0XHRcdH1cblxuXHRcdFx0JCh0aGlzKS5uZXh0KFwiLmV4cF9wb3BcIikuc2hvdygpO1xuXHRcdH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0JCh0aGlzKS5uZXh0KFwiLmV4cF9wb3BcIikuaGlkZSgpO1xuXHRcdH1cblx0KS5tb3VzZW1vdmUoXG5cdFx0ZnVuY3Rpb24oZXYpIHtcblx0XHRcdCQodGhpcykubmV4dChcIi5leHBfcG9wXCIpLmNzcyh7XG5cdFx0XHRcdFwidG9wXCI6IGV2LnBhZ2VZIC0gJCh0aGlzKS5uZXh0KFwiLmV4cF9wb3BcIikub3V0ZXJIZWlnaHQoKSAtIDQsXG5cdFx0XHRcdFwibGVmdFwiOiBldi5wYWdlWCArIDhcblx0XHRcdH0pO1xuXHRcdH1cblx0KTtcblxuXHQvLyBXSVAgQWN0aXZhdGVzIGxheWVyIHdpdGggZXhwbGFuYXRpb24gZWxlbWVudHNcblx0Ly8gQmVzc2VyIDo6YWZ0ZXIgb2RlciA6OmJlZm9yZSBiZW51dHplblxuXHQkKFwiLmV4cF9oZWxwX2J0blwiKS5jbGljayhmdW5jdGlvbihlKXtcblx0XHR2YXIgJHdyYXAsICRwb3A7XG5cblx0XHRpZihleHBfbW9kZSAhPSB0cnVlKXtcblx0XHRcdGV4cF9tb2RlID0gdHJ1ZTtcblxuXHRcdFx0JChcIi5qc19wb3BcIikuZWFjaChmdW5jdGlvbihpLCBlKXtcblx0XHRcdFx0aWYoJCh0aGlzKS5jc3MoXCJwb3NpdGlvblwiKSA9PSBcInN0YXRpY1wiKSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcyhcImpzX2NoYW5nZWRfcG9zXCIpO1xuXHRcdFx0XHRcdCQodGhpcykuY3NzKFwicG9zaXRpb25cIiwgXCJyZWxhdGl2ZVwiKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdCRwb3AgPSAkKHRoaXMpLm5leHQoXCIuZXhwX3BvcFwiKS5kZXRhY2goKTtcblx0XHRcdFx0JHdyYXAgPSAkKHRoaXMpLndyYXAoXCI8c3BhbiBjbGFzcz1cXFwiZXhwX3dyYXBcXFwiPjwvc3Bhbj5cIikucGFyZW50KCkucHJlcGVuZChcIjxzcGFuIGNsYXNzPVxcXCJleHBfbWFya2VyX3BvcFxcXCI+PC9zcGFuPlwiKTtcblx0XHRcdFx0JHdyYXAuYWZ0ZXIoJHBvcCk7XG5cdFx0XHR9KTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKFwiLmpzX3BvcFwiKS5lYWNoKGZ1bmN0aW9uKGksIGUpe1xuXHRcdFx0XHQkd3JhcCA9ICQodGhpcykucGFyZW50KFwiLmV4cF93cmFwXCIpO1xuXHRcdFx0XHQkcG9wID0gJHdyYXAubmV4dChcIi5leHBfcG9wXCIpLmRldGFjaCgpO1xuXHRcdFx0XHQkd3JhcC5maW5kKFwiLmV4cF9tYXJrZXJfcG9wXCIpLnJlbW92ZSgpO1xuXHRcdFx0XHQkKHRoaXMpLnVud3JhcChcIi5leHBfd3JhcFwiKTtcblx0XHRcdFx0JCh0aGlzKS5hZnRlcigkcG9wKTtcblx0XHRcdFx0aWYoJCh0aGlzKS5oYXNDbGFzcyhcImpzX2NoYW5nZWRfcG9zXCIpKXtcblx0XHRcdFx0XHQkKHRoaXMpLmNzcyhcInBvc2l0aW9uXCIsIFwiXCIpO1xuXHRcdFx0XHRcdGlmKCQodGhpcykuYXR0cihcInN0eWxlXCIpID09IFwiXCIpIHtcblx0XHRcdFx0XHRcdCQodGhpcykucmVtb3ZlQXR0cihcInN0eWxlXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKFwianNfY2hhbmdlZF9wb3NcIik7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRleHBfbW9kZSA9IGZhbHNlO1xuXG5cdFx0fVxuXHRcdGNvbnNvbGUubG9nKFwiRXhwbGFuYXRpb24gbW9kZTogXCIrIGV4cF9tb2RlKTtcblx0fSk7XG5cblx0Ly9cdFdJUCBTY3JvbGwgdG8gdG9wXG5cdCQoJyNqc19zY3JvbGx0b3AnKS5jbGljayhmdW5jdGlvbihldmVudCkge1xuXHRcdGNvbnNvbGUubG9nKCdzY3JvbGwgdG8gdGhlIHRvcCcpO1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0Ly8gJCgnYm9keScpLnNjcm9sbFRvcCgpO1xuXHRcdCQoJ2JvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6IDB9LCBiYXNpY19lYXNlLCBmdW5jdGlvbigpIHtcblx0XHRcdCBjb25zb2xlLmxvZygnYXJyaXZlZCBhdCB0b3AnKTtcblx0XHR9KTtcblx0fSk7XG5cdCQoJyNqc19zY3JvbGxkb3duJykuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRjb25zb2xlLmxvZygnc2Nyb2xsIGRvd24nKTtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdCQoJ2JvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6ICQoZG9jdW1lbnQpLmhlaWdodCgpfSwgYmFzaWNfZWFzZSAqIDIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0IGNvbnNvbGUubG9nKCdhcnJpdmVkIGF0IGJvdHRvbScpO1xuXHRcdH0pO1xuXHR9KTtcblxuXG5cblx0JCggXCIjZ2FtZUljb25cIiApLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHQkKCB0aGlzICkuY2xvbmUoKS5hcHBlbmRUbyggXCIjZ2FtZURldGFpbFwiICk7XG5cdFx0JCggdGhpcyApLnNpYmxpbmdzKCkuY2xvbmUoKS5hcHBlbmRUbyggXCIjZ2FtZURldGFpbFwiICk7XG5cdFx0JCggXCIjZ2FtZURldGFpbFwiICkucmVtb3ZlQ2xhc3MoIFwibWFnaWNcIiApO1xuXHR9KTtcblxuXHR2YXIgaSA9IDA7XG5cdCQoIFwiLnBhc3MtZGVmIGRkXCIgKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdCQoIHRoaXMgKS5maW5kKCBcImxpXCIgKS5lYWNoKGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHRcdGlmICggMCA9PSAkKCB0aGlzICkuY2hpbGRyZW4oIFwidWxcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyggaW5kZXggKyBcIjogXCIgKyAkKCB0aGlzICkudGV4dCgpICk7XG5cdFx0XHRcdHZhciB0ZW1wQ29udGVudCA9ICQoIHRoaXMgKS5odG1sKCk7XG5cdFx0XHRcdC8vJCggdGhpcyApLmh0bWwoIFwiPHNwYW4gY2xhc3M9XFxcImxpc3QtY291bnRcXFwiPjwvc3Bhbj5cIiApO1xuXHRcdFx0XHQkKCB0aGlzICkuaHRtbCggdGVtcENvbnRlbnQgK1wiPHNwYW4gY2xhc3M9XFxcImxpc3QtY291bnRcXFwiPlwiKyBpICtcIjwvc3Bhbj5cIiApO1xuXHRcdFx0XHRpKys7XG5cdFx0XHR9XG5cdFx0fSlcblx0fSk7XG5cblxuXG59KTtcblxuXG5cbi8vIFNjcm9sbFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4kKCBkb2N1bWVudCApLnNjcm9sbChmdW5jdGlvbigpIHtcblxuXHQvLyBUb2dnbGUgbmF2aWdhdGlvbiBlbGVtZW50c1xuXHRkb2NfcG9zX3kgPSAkKCBkb2N1bWVudCApLnNjcm9sbFRvcCgpO1xuXHQvLyBjb25zb2xlLmxvZyhkb2NfcG9zX3kpO1xuXHR2YXIgaCA9IHNjcm9sbF95X21hcmdpbjtcblx0Ly8gdmFyIGRlbW9fbWFyZ2luID0gJCgnLmhlYWRlcl9fZml4Jyk7XG5cdGlmIChkb2NfcG9zX3kgPiBoKSB7XG5cdFx0JCgnI2pzX3Njcm9sbHRvcCcpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdtYWdpYycpO1xuXHR9IGVsc2Uge1xuXHRcdCQoJyNqc19zY3JvbGx0b3AnKS5wYXJlbnQoKS5hZGRDbGFzcygnbWFnaWMnKTtcblx0fVxuXG5cblxufSk7XG4iXX0=
